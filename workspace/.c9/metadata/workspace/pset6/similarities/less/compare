{"changed":true,"filter":false,"title":"compare","tooltip":"~/workspace/pset6/similarities/less/compare","value":"#!/usr/bin/env python3\n\nimport argparse\nimport re\nimport sys\n\nfrom helpers import lines, sentences, substrings\n\n\ndef main():\n\n    # Parse command-line arguments\n    parser = argparse.ArgumentParser()\n    group = parser.add_mutually_exclusive_group(required=True)\n    group.add_argument(\"--lines\", action=\"store_true\", help=\"compare lines\")\n    group.add_argument(\"--sentences\", action=\"store_true\", help=\"compare sentences\")\n    group.add_argument(\"--substrings\", metavar=\"N\", type=positive,\n                       help=\"compare substrings of length N\")\n    parser.add_argument(\"FILE1\", help=\"file to compare\")\n    parser.add_argument(\"FILE2\", help=\"file to compare\")\n    args = vars(parser.parse_args())\n\n    # Read files\n    try:\n        with open(args[\"FILE1\"], \"r\") as file:\n            file1 = file.read()\n    except IOError:\n        sys.exit(f\"Could not read {args['FILE1']}\")\n    try:\n        with open(args[\"FILE2\"], \"r\") as file:\n            file2 = file.read()\n    except IOError:\n        sys.exit(f\"Could not read {args['FILE2']}\")\n\n    # Compare files\n    if args[\"lines\"]:\n        matches = lines(file1, file2)\n    elif args[\"sentences\"]:\n        matches = sentences(file1, file2)\n    elif args[\"substrings\"]:\n        matches = substrings(file1, file2, args[\"substrings\"])\n\n    # Output matches, sorted from longest to shortest, with line endings escaped\n    for match in sorted(matches, key=len, reverse=True):\n        print(match.replace(\"\\n\", \"\\\\n\").replace(\"\\r\", \"\\\\r\"))\n\n\ndef positive(string):\n    \"\"\"Convert string to a positive integer.\"\"\"\n    value = int(string)\n    if value <= 0:\n        raise argparse.ArgumentTypeError(\"invalid length\")\n    return value\n\n\nif __name__ == \"__main__\":\n    main()\n","undoManager":{"mark":0,"position":-1,"stack":[[{"start":{"row":12,"column":13},"end":{"row":12,"column":36},"action":"remove","lines":["argparse.ArgumentParser"],"id":2}]]},"ace":{"folds":[],"scrolltop":480,"scrollleft":0,"selection":{"start":{"row":56,"column":10},"end":{"row":56,"column":10},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":33,"state":"start","mode":"ace/mode/python"}},"timestamp":1508799146000}